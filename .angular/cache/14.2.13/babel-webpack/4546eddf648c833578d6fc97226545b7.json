{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { UntypedFormGroup, UntypedFormControl } from '@angular/forms';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { concatMap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/authentication.service\";\nimport * as i2 from \"src/app/services/image-upload.service\";\nimport * as i3 from \"@ngneat/hot-toast\";\nimport * as i4 from \"src/app/services/users.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/input\";\nimport * as i10 from \"@angular/forms\";\n\nfunction ProfileComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"h1\");\n    i0.ɵɵtext(2, \"User Profile\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2);\n    i0.ɵɵelement(4, \"img\", 3);\n    i0.ɵɵelementStart(5, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_div_0_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n\n      const _r2 = i0.ɵɵreference(9);\n\n      return i0.ɵɵresetView(_r2.click());\n    });\n    i0.ɵɵelementStart(6, \"mat-icon\");\n    i0.ɵɵtext(7, \"edit\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"input\", 5, 6);\n    i0.ɵɵlistener(\"change\", function ProfileComponent_div_0_Template_input_change_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const user_r1 = restoredCtx.ngIf;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.uploadImage($event, user_r1));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function ProfileComponent_div_0_Template_form_ngSubmit_10_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.saveProfile());\n    });\n    i0.ɵɵelementStart(11, \"div\", 8)(12, \"mat-form-field\");\n    i0.ɵɵelement(13, \"input\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"mat-form-field\");\n    i0.ɵɵelement(15, \"input\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 8)(17, \"mat-form-field\");\n    i0.ɵɵelement(18, \"input\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"mat-form-field\");\n    i0.ɵɵelement(20, \"input\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"mat-form-field\");\n    i0.ɵɵelement(22, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 14);\n    i0.ɵɵtext(24, \" Save \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const user_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", (tmp_0_0 = user_r1.photoURL) !== null && tmp_0_0 !== undefined ? tmp_0_0 : \"assets/images/image-placeholder.png\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.profileForm);\n  }\n}\n\nlet ProfileComponent = class ProfileComponent {\n  constructor(authService, imageUploadService, toast, usersService) {\n    this.authService = authService;\n    this.imageUploadService = imageUploadService;\n    this.toast = toast;\n    this.usersService = usersService;\n    this.user$ = this.usersService.currentUserProfile$;\n    this.profileForm = new UntypedFormGroup({\n      uid: new UntypedFormControl(''),\n      displayName: new UntypedFormControl(''),\n      firstName: new UntypedFormControl(''),\n      lastName: new UntypedFormControl(''),\n      phone: new UntypedFormControl(''),\n      address: new UntypedFormControl('')\n    });\n  }\n\n  ngOnInit() {\n    this.usersService.currentUserProfile$.pipe(untilDestroyed(this)).subscribe(user => {\n      this.profileForm.patchValue({ ...user\n      });\n    });\n  }\n\n  uploadImage(event, user) {\n    this.imageUploadService.uploadImage(event.target.files[0], `images/profile/${user.uid}`).pipe(this.toast.observe({\n      loading: 'Image is being uploaded...',\n      success: 'Image uploaded!',\n      error: 'There was an error in uploading'\n    }), concatMap(photoURL => this.usersService.updateUser({\n      uid: user.uid,\n      photoURL\n    }))).subscribe();\n  }\n\n  saveProfile() {\n    const profileData = this.profileForm.value;\n    this.usersService.updateUser(profileData).pipe(this.toast.observe({\n      loading: 'Updating data...',\n      success: 'Data has been updated',\n      error: 'There was an error in updating the data'\n    })).subscribe();\n  }\n\n};\n\nProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n  return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.ImageUploadService), i0.ɵɵdirectiveInject(i3.HotToastService), i0.ɵɵdirectiveInject(i4.UsersService));\n};\n\nProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProfileComponent,\n  selectors: [[\"app-profile\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[\"class\", \"form-container mat-elevation-z5 text-center\", 4, \"ngIf\"], [1, \"form-container\", \"mat-elevation-z5\", \"text-center\"], [1, \"profile-image\"], [\"width\", \"120\", \"height\", \"120\", 3, \"src\"], [\"mat-mini-fab\", \"\", 3, \"click\"], [\"type\", \"file\", \"hidden\", \"\", 3, \"change\"], [\"inputField\", \"\"], [1, \"margin-top\", 3, \"formGroup\", \"ngSubmit\"], [1, \"row\"], [\"type\", \"text\", \"matInput\", \"\", \"formControlName\", \"firstName\", \"placeholder\", \"First Name\"], [\"type\", \"text\", \"matInput\", \"\", \"formControlName\", \"lastName\", \"placeholder\", \"Last Name\"], [\"type\", \"text\", \"matInput\", \"\", \"formControlName\", \"displayName\", \"placeholder\", \"Display Name\"], [\"type\", \"number\", \"matInput\", \"\", \"formControlName\", \"phone\", \"placeholder\", \"Phone\"], [\"type\", \"text\", \"matInput\", \"\", \"formControlName\", \"address\", \"placeholder\", \"Address\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"margin-top\"]],\n  template: function ProfileComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProfileComponent_div_0_Template, 25, 2, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.user$));\n    }\n  },\n  dependencies: [i5.NgIf, i6.MatIcon, i7.MatButton, i8.MatFormField, i9.MatInput, i10.ɵNgNoValidate, i10.DefaultValueAccessor, i10.NumberValueAccessor, i10.NgControlStatus, i10.NgControlStatusGroup, i10.FormGroupDirective, i10.FormControlName, i5.AsyncPipe],\n  styles: [\"[_nghost-%COMP%] {\\n  padding: 32px;\\n}\\n\\n.profile-image[_ngcontent-%COMP%]    > img[_ngcontent-%COMP%] {\\n  border-radius: 100%;\\n  object-fit: cover;\\n  object-position: center;\\n}\\n\\n.profile-image[_ngcontent-%COMP%] {\\n  position: relative;\\n  width: 120px;\\n  margin: auto;\\n}\\n\\n.profile-image[_ngcontent-%COMP%]    > button[_ngcontent-%COMP%] {\\n  position: absolute;\\n  bottom: 10px;\\n  right: 0;\\n}\\n\\n.form-container[_ngcontent-%COMP%] {\\n  max-width: 400px;\\n}\\n\\n.row[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 16px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2ZpbGUuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0FBQ0Y7O0FBRUE7RUFDRSxtQkFBQTtFQUNBLGlCQUFBO0VBQ0EsdUJBQUE7QUFDRjs7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7QUFDRjs7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLFFBQUE7QUFDRjs7QUFFQTtFQUNFLGdCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxhQUFBO0VBQ0EsU0FBQTtBQUNGIiwiZmlsZSI6InByb2ZpbGUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gIHBhZGRpbmc6IDMycHg7XG59XG5cbi5wcm9maWxlLWltYWdlID4gaW1nIHtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG4gIG9iamVjdC1wb3NpdGlvbjogY2VudGVyO1xufVxuXG4ucHJvZmlsZS1pbWFnZSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgd2lkdGg6IDEyMHB4O1xuICBtYXJnaW46IGF1dG87XG59XG5cbi5wcm9maWxlLWltYWdlID4gYnV0dG9uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDEwcHg7XG4gIHJpZ2h0OiAwO1xufVxuXG4uZm9ybS1jb250YWluZXIge1xuICBtYXgtd2lkdGg6IDQwMHB4O1xufVxuXG4ucm93IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiAxNnB4O1xufVxuIl19 */\"]\n});\nProfileComponent = __decorate([UntilDestroy()], ProfileComponent);\nexport { ProfileComponent };","map":{"version":3,"mappings":"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","names":["UntypedFormGroup","UntypedFormControl","UntilDestroy","untilDestroyed","concatMap","i0","ProfileComponent","constructor","authService","imageUploadService","toast","usersService","currentUserProfile$","uid","displayName","firstName","lastName","phone","address","ngOnInit","pipe","subscribe","user","profileForm","patchValue","uploadImage","event","target","files","observe","loading","success","error","photoURL","updateUser","saveProfile","profileData","value","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/manisha/Projects/angular-chat-app-master/src/app/components/profile/profile.component.ts","/home/manisha/Projects/angular-chat-app-master/src/app/components/profile/profile.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { User } from '@angular/fire/auth';\nimport { UntypedFormGroup, UntypedFormControl } from '@angular/forms';\nimport { HotToastService } from '@ngneat/hot-toast';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { concatMap } from 'rxjs';\nimport { ProfileUser } from 'src/app/models/user-profile';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\nimport { ImageUploadService } from 'src/app/services/image-upload.service';\nimport { UsersService } from 'src/app/services/users.service';\n\n@UntilDestroy()\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.scss'],\n})\nexport class ProfileComponent implements OnInit {\n  user$ = this.usersService.currentUserProfile$;\n\n  profileForm = new UntypedFormGroup({\n    uid: new UntypedFormControl(''),\n    displayName: new UntypedFormControl(''),\n    firstName: new UntypedFormControl(''),\n    lastName: new UntypedFormControl(''),\n    phone: new UntypedFormControl(''),\n    address: new UntypedFormControl(''),\n  });\n\n  constructor(\n    private authService: AuthenticationService,\n    private imageUploadService: ImageUploadService,\n    private toast: HotToastService,\n    private usersService: UsersService\n  ) {}\n\n  ngOnInit(): void {\n    this.usersService.currentUserProfile$\n      .pipe(untilDestroyed(this))\n      .subscribe((user) => {\n        this.profileForm.patchValue({ ...user });\n      });\n  }\n\n  uploadImage(event: any, user: ProfileUser) {\n    this.imageUploadService\n      .uploadImage(event.target.files[0], `images/profile/${user.uid}`)\n      .pipe(\n        this.toast.observe({\n          loading: 'Image is being uploaded...',\n          success: 'Image uploaded!',\n          error: 'There was an error in uploading',\n        }),\n        concatMap((photoURL) =>\n          this.usersService.updateUser({ uid: user.uid, photoURL })\n        )\n      )\n      .subscribe();\n  }\n\n  saveProfile() {\n    const profileData = this.profileForm.value;\n    this.usersService\n      .updateUser(profileData)\n      .pipe(\n        this.toast.observe({\n          loading: 'Updating data...',\n          success: 'Data has been updated',\n          error: 'There was an error in updating the data',\n        })\n      )\n      .subscribe();\n  }\n}\n","<div\n  class=\"form-container mat-elevation-z5 text-center\"\n  *ngIf=\"user$ | async as user\"\n>\n  <h1>User Profile</h1>\n  <div class=\"profile-image\">\n    <img\n      width=\"120\"\n      height=\"120\"\n      [src]=\"user.photoURL ?? 'assets/images/image-placeholder.png'\"\n    />\n    <button mat-mini-fab (click)=\"inputField.click()\">\n      <mat-icon>edit</mat-icon>\n    </button>\n  </div>\n  <input #inputField type=\"file\" hidden (change)=\"uploadImage($event, user)\" />\n  <form class=\"margin-top\" [formGroup]=\"profileForm\" (ngSubmit)=\"saveProfile()\">\n    <div class=\"row\">\n      <mat-form-field>\n        <input\n          type=\"text\"\n          matInput\n          formControlName=\"firstName\"\n          placeholder=\"First Name\"\n        />\n      </mat-form-field>\n      <mat-form-field>\n        <input\n          type=\"text\"\n          matInput\n          formControlName=\"lastName\"\n          placeholder=\"Last Name\"\n        />\n      </mat-form-field>\n    </div>\n\n    <div class=\"row\">\n      <mat-form-field>\n        <input\n          type=\"text\"\n          matInput\n          formControlName=\"displayName\"\n          placeholder=\"Display Name\"\n        />\n      </mat-form-field>\n      <mat-form-field>\n        <input\n          type=\"number\"\n          matInput\n          formControlName=\"phone\"\n          placeholder=\"Phone\"\n        />\n      </mat-form-field>\n    </div>\n    <mat-form-field>\n      <input\n        type=\"text\"\n        matInput\n        formControlName=\"address\"\n        placeholder=\"Address\"\n      />\n    </mat-form-field>\n\n    <button type=\"submit\" class=\"margin-top\" mat-raised-button color=\"primary\">\n      Save\n    </button>\n  </form>\n</div>\n"]},"metadata":{},"sourceType":"module"}